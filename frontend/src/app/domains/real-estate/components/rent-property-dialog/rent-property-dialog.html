<mat-horizontal-stepper #stepper [linear]="true">
    <!-- CHANGE DEFAULT ICONS -->
    <ng-template matStepperIcon="edit">
        <lucide-angular [img]="Pencil"></lucide-angular>
    </ng-template>

    <ng-template matStepperIcon="done">
        <lucide-angular [img]="Check"></lucide-angular>
    </ng-template>

    <ng-template matStepperIcon="tenant">
        <lucide-angular [img]="UserRound"></lucide-angular>
    </ng-template>

    <ng-template matStepperIcon="lease">
        <lucide-angular [img]="FileText"></lucide-angular>
    </ng-template>

    <ng-template matStepperIcon="save">
        <lucide-angular [img]="Save"></lucide-angular>
    </ng-template>

    <ng-template matStepperIcon="folder">
        <lucide-angular [img]="Folder"></lucide-angular>
    </ng-template>

    <!-- LEASE FORM -->
    <mat-step [stepControl]="createLeaseForm" state="lease">
        <form [formGroup]="createLeaseForm">
            <ng-template matStepLabel>Bail</ng-template>
            <mat-form-field>
                <mat-label>Loyer Hors Charges (en €)</mat-label>
                <input matInput type="number" formControlName="rentAmount" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Charges (en €)</mat-label>
                <input matInput type="number" formControlName="chargesAmount" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Début du bail</mat-label>
                <input matInput type="date" formControlName="startDate" />
                <!-- <input matInput [matDatepicker]="picker" formControlName="startDate">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker> -->
            </mat-form-field>
            <mat-form-field>
                <mat-label>Fin du bail</mat-label>
                <input matInput type="date" formControlName="endDate" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Caution (en €)</mat-label>
                <input matInput type="number" formControlName="deposit" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Notes</mat-label>
                <input matInput type="textarea" formControlName="notes" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Document</mat-label>
                <input type="text" matInput [value]="selectedFile?.name || ''" placeholder="Choisir un fichier" readonly
                    (click)="fileInput.click()" />

                <button mat-icon-button matSuffix (click)="fileInput.click()" >
                    <!-- <mat-icon>attach_file</mat-icon> -->
                    <lucide-angular [img]="Folder"></lucide-angular>
                </button>
            </mat-form-field>
            <input #fileInput type="file" (change)="onFileSelected($event)" hidden />
            <div class="flex justify-end">
                <button matFab matStepperNext>
                    <lucide-angular [img]="ArrowBigRight"></lucide-angular>
                </button>
            </div>
        </form>
    </mat-step>
    <!-- TENANT FORM -->
    <mat-step [stepControl]="createTenantForm" state="tenant">
        <form [formGroup]="createTenantForm">
            <ng-template matStepLabel>Locataire</ng-template>
            <mat-form-field>
                <mat-label>Nom</mat-label>
                <input matInput type="text" [errorStateMatcher]="matcher" formControlName="lastName" />
                @if (createTenantForm.get('lastName')?.hasError('required')) {
                <mat-error>Le nom est <strong>obligatoire</strong></mat-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Prénom</mat-label>
                <input matInput type="text" formControlName="firstName" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Adresse mail</mat-label>
                <input matInput type="text" formControlName="email" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Numéro de téléphone</mat-label>
                <input matInput type="text" formControlName="phoneNumber" />
            </mat-form-field>
            <div class="flex justify-between">
                <button matFab matStepperPrevious>
                    <lucide-angular [img]="ArrowBigLeft"></lucide-angular>
                </button>
                <button matFab matStepperNext>
                    <lucide-angular [img]="ArrowBigRight"></lucide-angular>
                </button>
            </div>
        </form>
    </mat-step>
    <!-- SAVE -->
    <mat-step state="save">
        <ng-template matStepLabel>Confirmer</ng-template>
        <p>Avez-vous vérifié les informations avant de sauvegarder ?</p>
        <div class="flex justify-between">
            <button matFab matStepperPrevious>
                <lucide-angular [img]="ArrowBigLeft"></lucide-angular>
            </button>
            <!-- <button matButton (click)="stepper.reset()">Reset</button> -->
            <button matFab>
                <lucide-angular [img]="Save" (click)="createLease()"></lucide-angular>
            </button>
            <button matFab>
                <lucide-angular [img]="X" (click)="closeDialog()"></lucide-angular>
            </button>
        </div>
    </mat-step>
</mat-horizontal-stepper>